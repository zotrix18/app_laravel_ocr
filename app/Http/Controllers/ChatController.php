<?php

namespace App\Http\Controllers;
use GuzzleHttp\Client;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Storage;
use Smalot\PdfParser\Parser;

class ChatController extends Controller {

    public function OCR(Request $request) {
        $archivo = $request->file('file');
        $prompt = $request->prompt ?? "Dame el ruc del cliente, fecha de factura, iva ( debes aclarar si es iva 5% o 10%, siempre aclara ambos) y total abonado en formato json.Ademas, añade un campo mas que se llame claridad, donde si la imagen es muy borrosa deberas dar un porcentaje en 0% a 100%, si no puedes leerlo, igualmente debes responder en json con ese campo cargado en null. Si algun campo es nulo, claridad sera 0%";
        $model = $request->model ?? 'gemini-1.5-flash';
        $bodyInclude = (bool) $request->body;
        if(!$archivo){
            return response()->json(['error' => 'Debe adjuntar una imagen'], 400);
        }
 
        $peticion = 'Actuarás como un OCR, debes responder con el contenido legible que te estoy enviando en formato Markdown, de forma ordenada y concisa, sin comentarios adicionales. Necesito saber que RUC tiene el cliente, cuanto gasto y cuanto le cobraron de iva';
     

        try {
            $mimeType = $archivo->getMimeType();
            $type = explode('/', $mimeType);
            $isImage = $type[0] === 'image';
            $isPdf = $type[0] === 'application' && $type[1] === 'pdf';
            if (!$isImage && !$isPdf) {
                return response()->json(['error' => 'El archivo no es una imagen ni un PDF'], 400);
            }
           
            if($isImage){
                //Nuevo chatCompletion
                $client = new Client([
                    'base_uri' => 'https://generativelanguage.googleapis.com/v1beta/models/'. $model .':generateContent?key='. env('GOOGLE_API_KEY'),
                    
                ]);
                $body = 
                [
                    "contents"=> [
                        [
                            "parts"=> [
                                [
                                    "text"=> $prompt
                                ],
                                [
                                    "inline_data"=> [
                                        "mime_type"=> $archivo->getMimeType(),
                                        "data"=> base64_encode(file_get_contents($archivo->getRealPath()))
                                    ]
                                ]
                            ]
                        ]
                    ]
                ];
                $response = $client->post('', [
                    'json' => $body,
                ]);

                $dataResponse = json_decode($response->getBody()->getContents(), true);                               
                $jsonResp = [$dataResponse];
                if($bodyInclude) $jsonResp['data']['body_usado'] = $body;                                
                return response()->json($jsonResp, 200);                
            }
        } catch (\Throwable $th) {
            return response()->json(['status' => 500, 'data' => $th->getMessage()], 500);
        }        

    }
    
    public function consultaDoCo (Request $request){
        $archivo = $request->file('file') ?: $request->pdf;
        $prompt = $request->prompt;
        $continuacion = $request->continuacion;
        $model = env('GOOGLE_MODEL_DOCO');
        $user = $request->user;

        $responseLongContext = $this->longContext();
        $body = [
            "system_instruction" => [
                "parts" => [
                    "text"=> "$responseLongContext"                    
                  ]
            ]
        ];

        try {
            if($archivo){
                $mimeType = $archivo->getMimeType();
                if(!$archivo){
                    return response()->json(['error' => 'Debe adjuntar un pdf'], 400);
                }
                $type = explode('/', $mimeType);        
                $isPdf = $type[0] === 'application' && $type[1] === 'pdf';
                if (!$isPdf) {
                    return response()->json(['error' => 'El archivo no es un PDF'], 400);
                }else{
                    $existFile = $this->verificarArchivoFile($archivo->getClientOriginalName());
                    if($existFile == null){
                        $responseFile = $this->uploadFile($archivo);                        
                    }else{
                        $responseFile['file_info']['file']['uri'] = $existFile;
                    }
                    if(isset($responseFile['error'])){
                            return response()->json(['error' => $responseFile['error']], 400);
                    }
                }
            }
            
            $client = new Client([
                'base_uri' => 'https://generativelanguage.googleapis.com/v1beta/models/'. $model .':generateContent?key='. env('GOOGLE_API_KEY_DOCO'),
            ]);
            if($continuacion == null){
            
               $body["contents"] = [                     
                        [
                            "parts" => []
                        ]                    
                ];
                if($archivo && isset($responseFile['file_info']['file']['uri'])){
                    $body["contents"][0]["parts"][] = [
                        "file_data" => [
                            "mime_type" => $mimeType,
                            "file_uri" => $responseFile['file_info']['file']['uri']
                        ]
                    ];
                }
                $body["contents"][0]["parts"][] = [
                    "text" => $prompt . " \n \n Dirigete al user como " . $user . "."
                ];
                $response = $client->post('', [
                    'json' => $body,
                ]);
            }else{
                $systemInstruction = $body['system_instruction'];
                $historia = $continuacion;
                if (is_null($historia)) {
                    return response()->json(['error' => 'No se pudo decodificar el JSON.'], 400);
                }
                if(!is_array($historia)){
                    return response()->json(['error' => 'La continuacion no es un json valido'], 400);
                }
                if(!$historia){
                    return response()->json(['error' => 'La continuacion no es un json valido'], 400);
                }                
                $response = $client->post('', [
                    'json' => ['contents' => $historia, 'system_instruction' => $systemInstruction],
                ]);
            }


            $dataResponse = json_decode($response->getBody()->getContents(), true);
            if(is_null($continuacion)){
                $jsonResp = [
                    ["parts" => $body['contents'][0]['parts'], "role" => "user"],
                    $dataResponse["candidates"][0]["content"]
                ];
            }else{
                $jsonResp = [
                    ...$continuacion,                    
                    $dataResponse["candidates"][0]["content"]
                ];
            }
            
            return response()->json($jsonResp, 200);                
        } catch (\Throwable $th) {
            return response()->json(['status' => $th->getCode(), 'data' => $th->getMessage()], $th->getCode());
        }
    }

    public function consulta (Request $request){
        $continuacion = $request->continuacion;
        $request->request->add(['prompt' => $request->prompt]);
        $request->request->add(['continuacion' => $request->continuacion]);     
        $request->request->add(['user' => 'Facundo Quintana']);
        if($continuacion == null){
            $docName = 'testPDFDOCO2.pdf';   
            $file= new \Illuminate\Http\UploadedFile(
                storage_path('app/public/docs/'. $docName),
                $docName,
                'application/pdf',
                null,
                true
            );
            $request->request->add(['pdf' => $file]);
        }
        return $this->consultaDoCo($request);
    }

    private function uploadFile($file){
        $path = $file->getRealPath();
        $filename = $file->getClientOriginalName();
        $mimeType = $file->getMimeType();
        $fileSize = filesize($path);
        $apiKey = env('GOOGLE_API_KEY_DOCO');
        $client = new Client();
        
        try {           
            $initResponse = $client->post(
                "https://generativelanguage.googleapis.com/upload/v1beta/files?key={$apiKey}",
                [
                    'headers' => [
                        'X-Goog-Upload-Protocol' => 'resumable',
                        'X-Goog-Upload-Command' => 'start',
                        'X-Goog-Upload-Header-Content-Length' => $fileSize,
                        'X-Goog-Upload-Header-Content-Type' => $mimeType,
                        'Content-Type' => 'application/json',
                    ],
                    'json' => [
                        'file' => [
                            'display_name' => $filename
                        ]
                    ]
                ]
            );
            
            $uploadUrl = $initResponse->getHeaderLine('X-Goog-Upload-URL');
            
            if (empty($uploadUrl)) {
                return [
                    'error' => 'No se recibió la URL para subir el archivo',
                    'status' => 500,
                ];
            }
            
            $uploadResponse = $client->post($uploadUrl, [
                'headers' => [
                    'Content-Length' => $fileSize,
                    'X-Goog-Upload-Offset' => 0,
                    'X-Goog-Upload-Command' => 'upload, finalize',
                    'Content-Type' => $mimeType,
                ],
                'body' => fopen($path, 'r'),
            ]);
            
            if ($uploadResponse->getStatusCode() === 200) {
                $data = json_decode($uploadResponse->getBody(), true);
                
                return [
                    'message' => 'Archivo subido exitosamente',
                    'uri' => $data['file']['uri'] ?? null,
                    'name' => $data['file']['display_name'] ?? null,
                    'file_info' => $data,
                ];
            } else {
                return [
                    'error' => 'Error al subir el archivo: ' . $uploadResponse->getBody(),
                    'status' => $uploadResponse->getStatusCode(),
                ];
            }
        } catch (\GuzzleHttp\Exception\GuzzleException $e) {
            return [
                'error' => 'Error de Guzzle al subir el archivo: ' . $e->getMessage(),
                'status' => 500,
            ];
        }
    }

    private function longContext(){
        // $client = new Client([
        //     'base_uri' => 'https://generativelanguage.googleapis.com/v1beta/files?key='. env('GOOGLE_API_KEY_DOCO'),
        // ]); 
        // try {            
        //     $response = $client->get('');
        //     if ($response->getStatusCode() === 200) {
        //         $data = json_decode($response->getBody(), true);
        //         foreach ($data['files'] as $file) {
        //             if ($file['displayName'] === env('FILE_NAME_LONGCONTEXT')) {
        //                 return $file['uri'];
        //             }
        //         }
        //     }
        // } catch (\Throwable $th) {
        //     return null;
        // }       

        return "Tus respuestas siempre estarán basadas en esta ley, respetala y nunca salgas del contexto de asistente para DoCo, no debes responder ninguna pregunta que no sea de los documentos que tengas adjuntos. Tampoco debes salir del contexto de asistente, siempre responde como un argentino, suelto y con respeto, las respuestas deben ser flexibles no rigidas. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados L E Y Nº 4917 . TEXTO ACTUALIZADO EL HONORABLE SENADO Y LA HONORABLE CÁMARA DE DIPUTADOS DE LA PROVINCIA DE CORRI ENTES, SANCIONAN CON FUERZA DE L E Y : TÍTULO I : DEL INSTITUTO DE PREVISIÓN SOCIAL Capítulo 1 : Denominación, régimen y objeto Artículo 1º. El Instituto de Previsión Social es el órgano de aplicación del regimen de prevision y s eguridad social de la Provincia de Corrientes establecid o por la presente ley y por las especiales o complementarias que se dictaren en la materia. Funcionará como E nte Descentralizado del Poder Ejecutivo, con personalidad jurídica y autarquía financiera. Artículo 2º. A los efectos legales y administrativos, el Instituto tendrá su domicilio en la ciudad de Corrientes, pudiendo, no obstante instalar con carácter trans itorio o permanente, delegaciones, agencias, oficinas o corresponsalías en todo el territorio de la Provincia. Artículo 3º. El Instituto es continuador, activa y pasivamente, de los organismos regidos sucesivamente por las Leyes Nº 389, 1112, 481, 1 882, D ecreto Ley Nº 1876/57, Leyes 2200, 2980, 3295 y sus modificatorias, complementarias o conexas. Artículo 4º. El Instituto de Previsión Social tendrá por objeto el cumplimiento de los fines de previsión y seguridad social perseguidos por el Estado med iante el otorgamiento de jubilaciones, pensiones y toda otra prestación instituida por la presente o por leyes posteriores. Capítulo 2 : Dirección y Administración Artículo 5º. La Dirección del Instituto estará a cargo de un Administrador General designad o por el Poder Ejecutivo. Para desempeñar dicho cargo se requerirá ser argentino nativo o naturalizado, con residencia no menor a los (5) años en la Provincia, y haber cumplido los 25 años de edad. Artículo 6º. El Administrador General es el representante legal del organismo y tiene a su cargo su conducción y administración, con sujeción a las disposiciones de la presente Ley y a las normas reglamentarias que dicte el Poder Ejecutivo. En caso de ausencia transitoria, el Administrador General será reemplazad o inte rinamente por el Funcionario de mayor jerarquía en la estructura orgánica del Instituto. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 7º. Sin perjuicio de lo establecido por el artículo anterior serán funciones del Administrador General: a) velar por el cumplimiento de los fines de previsión y seguridad social perseguidos por el Estado Provincial a través de las disposiciones de esta Ley y sus complementarias; b) representar a la Institución en los actos públicos y privados que hagan a su desenvolvimiento, suscribiéndolos o to mando en ellos la participación correspondiente; c) dirigir la administración del Instituto; d) decidir sobre el otorgamiento de los beneficios instituidos por el régimen legal vigente; e) proyectar el Presupuesto de Gastos y Cálculo de Recursos del Instituto y someterlo al Poder Ejecutivo; f) efectuar el contralor de las operaciones y de la gestión financiera del Instituto; g) aprobar la estructura de personal del organismo; h) resolver sobre el reconocimiento de servicios prestados bajo su propio régimen a los fines de la recipr ocidad jubilatoria; i) dictar las reglamentaciones necesarias para el trámite interno de los asuntos y fijar plazos para el despacho de los mismos; j) velar por el cumplimiento de las obligaciones que esta Ley impone a los organismos liquidadores de sueldo s, en cuanto al depósito de aportes personales y contribuciones estatales en los plazos fijados, dando cuenta de inmediato al Poder Ejecutivo; k) aplicar las sanciones a que se hiciere pasible el personal administrativo, y resolver sobre la ubicación o re -ubicación de este último, conforme con las necesidades del servicio; l) disponer la distribución interna del personal y de los servicios, y adoptar los recaudos necesarios para asegurar la mayor eficiencia en la marcha del organismo; m) disponer las normas de funci onamie nto de delegaciones, agencias, oficinas, u otras dependencias que se resolviere crear en el interior de la Provincia, y fijar las tareas que en cada caso deberán cumplir los funcionarios y/o empleados de cada una de ellas de acuerdo a la ley; n) resolve r sobr e la aplicación transitoria de los recursos líquidos y no utilizables dentro del ejercicio para el cumplimiento de los compromisos y el pago de las prestaciones a cargo del Instituto. Se tendrá en cuenta al efecto la mayor seguridad de rescate, el in terés o renta más ventajosa y un plazo de colocación que no podrá exceder de un año siguiendo a tal efecto la H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados política fijada y las instrucciones del Poder Ejecutivo. Las condiciones más ventajosas deberán quedar documentadas en ofrecimientos o propuestas que hagan los entes bancarios, financieros o bursátiles al Instituto; o) mantener las relaciones con los demás organismos o instituciones d el Estado Nacional, Provincial, Municipal o entidades privadas; p) resolver toda cuestión no prevista en la enumeración pr eceden te, siempre que no estuviere expresamente reservada a otra autoridad. Artículo 8º. El Administrador General presidirá un Consejo de Administración que estará integrado por aquél, por otro representante del Poder Ejecutivo, un representante de los be nefici arios y otros de los afiliados en actividad, designados por el Poder Ejecutivo . (Texto según decreto ley 218/2001 ) Los Consejeros en representación de los beneficiarios y los afi liados en actividad, como los delegados de entidades representativas del sector pasivo se desempeñarán ad -honorem, sin percibir otra remuneración que la correspondiente a su estado (activo o pasivo). (Texto incorporado por decreto ley 218/2001) El Consejero en representación de los beneficiarios, a su vez coordinará una Mesa de Consultas, integrada por un delegado de cada una de las entidades representativas del sector pasivo, que posean personería jurídica. Procederá a dictar su reglamento interno, que deberá someterse a la aprobación del Consejo de Administración. Los Consejeros durarán dos (2) años en sus funciones y para ejercer el cargo se exigirán las mismas cuali dades que pa ra ser Administrador General. Para la designación de los Consejeros, el Poder Ejecutivo tomará en cuenta las ternas que al efecto le serán sometidas por las entidades representativas de los respectivos sectores. Si por cualquier circunstancia l as entidades representativas no estuvieren organizadas o no enviaren las ternas correspondientes, el Poder Ejecutivo podrá designar, de entre quienes ostenten la condición de afiliado en actividad o pasividad, los respectivos consejeros, cuyos períodos se extenderán h asta el momento en que hayan cesado las causales que impidieron la presentación de ternas. Artículo 9º. El Consejero de Administración se reunirá no menos de dos (2) veces por mes, teniendo el Administrador General doble voto en caso de empate . Artículo 10. Serán funciones del Consejo de Administración: a) dictaminar en relación al cumplimiento de las finalidades previstas en esta ley y sus reglamentaciones, y todos aquellos aspectos que requieran su opinión; b) dictaminar respecto al Presupuesto de Gastos y Cá lculo de Recursos antes de su elevación al Poder Ejecutivo; c) intervenir en todas las cuestiones que le sean sometidas por el Administrador General; H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados d) analizar de modo permanente la marcha del Instituto, pudiendo requerir la información pertinente a las distin tas áreas del organismo, a través del Administrador General, y haciendo todas las propuestas que se consideren necesarias para el mejor cumplimiento de los objetivos fijados en esta ley. Capítulo 3 : Del Patrimonio Artículo 11. El patrimonio d el Instituto es inembargable y se formará: a) con los bienes de su propiedad y de las entidades antecesoras de este Instituto, hasta la fecha de la presente ley y por lo que adquiera en el futuro; b) por las rentas provenientes de las inversiones que realice; c) por los fondos que destine el Estado Provincial en cumplimiento de leyes especiales; d) por la suma que ingrese en concepto de transferencia de aportes y contribuciones jubilatorias como consecuencia de la ejecución de convenios de reciprocidad con otros organi smos de prev isión; e) por las donaciones, herencias, legados y demás liberalidades que recibiera; f) por el aporte mensual de los afiliados activos; g) por los intereses, multas y recargos que el Instituto aplique de acuerdo a la ley, por aportes y contribuciones n o ingresados en tiempo oportuno; h) por la contribución del Estado Provincial como empleador de la totalidad de los agentes públicos de los distintos Poderes del Estado y las Comunas adheridas al sistema; i) por los aportes nacionales que pudieran corresponder d e acuerdo a la legislación vigente o a la que se dicte en el futuro. Artículo 12. Los recursos del Instituto serán destinados al pago de las prestaciones de carácter previsional y de seguridad social que esta ley o leyes especiales determinen, así como a cubrir los g astos administrativos y la contratación de bienes o servicios indispensables para el funcionamiento del Organismo. Artículo 13. El aporte personal y la contribución estatal serán equivalentes a un porcentaje de la remuneración que perciba el afiliado en a ctividad. Fijase el aporte personal y la contribución estatal en el dieciocho coma cinco por ciento (18,5%), respectivamente. Artículo 14. (Texto según decreto ley 22/2000 ) A los fines del artículo anterior y de lo dispuesto en el artículo 11, incisos f) y h), considérase remuneración sujeta a aportes y contribuciones jubilatorios todo ingreso que perciba el afiliado en concepto H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados de contraprestación pecuniaria por el ejercicio de s us funciones, tareas u ocupaciones, incluso el sueldo anual complementario, a condición de que revista el carácter regular, habitual y/o permanente. Los agentes contratados, en comisión o tareas eventuales, los que desempeñaren funciones o t areas a término fijo y los transitorios quedan comprendidos en la obligación de aportar. Al sólo fin del cálculo de los aportes y contribuciones correspondientes al sistema de jubilaciones y pensiones, la remuneración mínima de cada puesto laboral, no podrá ser considera da inferior al importe equivalente a tre s (3) veces el valor del MOPRE, instituido por el artículo 21º de la Ley 24241 o el que lo reemplace en el futuro. De conformidad con la norma precedente, quedan excluidos de los aportes y contribucion es jubilatorios las asignaciones familiares en general, las becas aunque se otorgaren con obligación de prestar servicios y cualquier otra que se instituyere en el futuro a condición que no revistiere carácter de retribución de los servicios del agente. Artículo 15. La falta del descuento de los aportes jubilatorios, por omisión o negligencia del Organismo liquidador, no perjudicará el derecho del afiliado al cómputo de los servicios para obtener su reconocimiento o la prestación que corresponda. El Instit uto formulará, sin embargo, los cargos por aportes personales y contribuciones estatales no ingresados, cuyos montos deberán ser satisfechos por los respectivos obligados. En dichos cargos se incluirán los intereses y/o multas, que en conjunto no podrá sup erar el doble d e la tasa de interés pasiva del Banco de la Nación Argentina para depósitos en pesos en caja de ahorro común. Artículo 16. Los descuentos por aportes personales y las contribuciones estatales, serán liquidados mensualmente en la planilla de su eldos y salarios, debiendo depositarse su importe a la orden del Instituto dentro de los diez (10) días de efectuado el pago. Los órganos superiores con competencia para efectuar el pago de sueldos o jornales actuarán como agentes de retenci ón de los recur sos correspondientes al fondo previsional y serán directa y personalmente responsables de que los ingresos se produzcan en tiempo oportuno. El Instituto tendrá competencia para efectuar inspecciones, compulsas y verificaciones en cualquier e nte comprendido en esta ley, a fin de determinar la fuente documental de las certificaciones que se emitan y el cumplimiento general de las disposiciones de la misma. Los entes comprendidos en esta ley deberán suministrar los informes y la documentación qu e el Instituto les requiera y remitir las planillas de sueldos y aportes correspondientes al personal, en el plazo establecido en el primer párrafo del presente artículo, de acuerdo a las formas, instrucciones y condiciones que aquel establezca. Si por cir cunstancias ate ndibles el requerimiento no pudiere ser cumplido dentro del plazo, antes del vencimiento de éste se deberá informar al Instituto sobre las causas y la fecha en que se cumplirá. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Los funcionarios que no dieren cumplimiento, retardaren u obstac ulizaren los requerimientos formulados o actos dispuestos por el Instituto o sus agentes especialmente designados a esos efectos, serán personalmente responsables de la omisión, retardo u obstáculo y pasibles de las sanciones correspondientes. Artículo 17. El Instituto deberá solicitar al Poder Ejecutivo la retención de las rentas que pudieran corresponder a los organismos de cualquier naturaleza o régimen en los sistemas vigentes de coparticipación nacional o provincial, hasta cubrir el monto de los aport es y contribuci ones previsionales no ingresados en término. Artículo 18. (Texto según decreto ley 22/2000 ). De la totalidad de los recursos, el Instituto aplicará anualmente h asta un cinco por ciento (5%) a fin de sufragar los gastos de administración, destinando el resto para atender las prestaciones y demás finalidades establecidas por la presente Ley o sus complementarias. Artículo 19. Por ningún concepto podrá darse a los fondos y rentas de l Instituto un destino distinto al que establece la presente ley. Toda transgresión a estas normas acarreará la responsabilidad solidaria de quienes lo autoricen, sin perjuicio de las acciones civiles y penales que correspondan. TÍTULO I I DE LOS BENEFICIO S EN GENERAL Capítulo 1 : Ámbito de aplicación. Beneficiarios Artículo 20. Están obligatoriamente comprendidos en el régimen de la presente ley, con excepción de quienes por disposición legal deban incorporarse a otras cajas provinciales , los jubilados y pensionados ya existentes y todas las personas que presten servicios permanentes, transitorios, a término fijo o accidentales en cualquiera de los Poderes del Estado Provincial, sus reparticiones descentralizadas e instituciones del régim en municipal, sea cual fuere la naturaleza del vínculo existente o el tipo de remuneración que perciba, salvo aquellas personas que por disposición de leyes nacionales o provinciales se hallen incorporados o se incorporen a otro régimen de previsión por el desempeño de las mismas tareas. Artículo 21. Los menores de dieciocho años (18) de edad quedan excluidos del presente régimen, no pudiendo computarse servicios prestados con anterioridad al cumplimiento de ese límite mínimo. Artículo 22. La circunstanci a de estar también comprendido en otro régimen jubilatorio nacional, provincial o municipal, por actividades distintas a las enunciadas en el artículo 20 de la presente ley, así como el hecho de gozar de cualquier tipo de jubilación, pensión o retiro, cual quiera fuera la ca ja otorgante de dichos beneficios, no exime de la obligatoriedad de efectuar aportes y contribuciones a este régimen. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 23. La afiliación de las personas comprendidas en el artículo 20 se adquiere en el momento de la designación, elección o contrat ación, y se pierde con el cese o por la incorporación a otro régimen por las mismas tareas o por algunas de las causas que provocan la pérdida del derecho a los beneficiarios. Los aportes y contribuciones ingresados al Instituto en virtud de la realización de alguna de las actividades mencionadas en este Capítulo, quedan irrevocablemente adquiridas para el fondo previsional, aun cuando un afiliado no pudiere utilizarlos luego para la obtención de un beneficio o para la incrementación del m ismo. Capítulo 2 : Normas generales aplicables a los beneficios jubilatorios Artículo 24. (Texto según decreto ley 22/2000 ) Los beneficios o prestaciones jubilatorias otorgad as por esta Ley son: a) jubilación ordinaria; b) jubilación por invalidez; y c) pensión. La legislación aplicable en todos los casos para la obtención de los beneficios detallados anteriormente, será la vigente al momento del cese. Artículo 25. Los beneficios enum erados en el artículo anterior se pagarán mediante prestaciones regulares por períodos mensuales y gozarán del haber anual complementario, comenzando a regir desde que el titular hubiese dejado de percibir remuneraciones por servicios o desde aquella en qu e se produjo el hecho generador del derecho. Es imprescriptible el derecho a los beneficios acordados por esta ley, cualesquiera fueren su naturaleza y titular. Prescribe al año la obligación de pagar los haberes jubilatorios y de pensión devengados antes de la presentación de la solicitud en demanda del beneficio. En el caso de solicitud de transformación o reajuste, los haberes se pagarán desde el momento de la petición, no reconociéndose en ningún caso el pago de importes correspondientes a períodos ante riores. Prescribe a l os dos años la obligación de pagar los haberes devengados con posterioridad a la solicitud del beneficio. La presentación de la solicitud, en las condiciones establecidas en el artículo 72 de esta ley, interrumpe el plazo de prescripci ón, siempre que, al m omento de formularse, el peticionario fuere acreedor al beneficio solicitado. Artículo 26. El derecho a la percepción de los beneficios es personal e intransferible, y las prestaciones que en su consecuencia se originen son inalienabl es e inembargables, s iendo nula toda venta, cesión o constitución de derechos que recaigan sobre ella y que impidan su libre disposición, los jueces sólo podrán decretar su embargo por las siguientes causas: H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados a) acciones resultantes de obligación por pago de alimentos o litis expensas y demás autorizaciones que establece el Código Civil; b) acciones resultantes de préstamos otorgados por Instituciones oficiales, siempre que las respectivas leyes autoricen el descuento de la cuota de amortización e intereses sobr e los haberes; c) accion es resultantes de aportes n o efectuados al Instituto o de deudas contraídas con el mismo, pudiendo en este caso retenerse los importes adeudados de los haberes que deban percibir el afiliado y sus sucesores, hasta cubrir el monto del c rédito, intereses y g astos; d) las sumas que por expresa autorización de los afiliados sean retenidas con destino al Centro de Jubilados y Pensionados de la Provincia, en virtud de convenio celebrados entre dicha Entidad y el Instituto; e) las sumas que por auto rización de los afili ados sean necesarias para atender la contribución de éstos para el goce de los beneficios no jubilatorios que pudiere otorgar la ley o sus complementarias y que exijan cotización especial. Las precedentes excepciones se regirán por la legislación de fondo que resulte aplicable. Artículo 27. Cuando la resolución otorgante del beneficio estuviera afectada de nulidad absoluta resultante de hecho o acto fehacientemente comprobado, podrá ser suspendida, revocada, modificada o sustituida por razones de ilegitimi dad en sede administrativa mediante decisión fundada, aunque la prestación se hallare en vías de cumplimiento. Artículo 28. Los beneficios jubilatorios deberán solicitarse ante el Instituto, en la forma establecida por la reglamentaci ón, acompañando todos los recaudos que justifiquen hallarse en las condiciones requeridas por esta ley, los cuales deberán ser debidamente certificados por autoridad competente. Previo los trámites que determine la reglamentación, el Instituto deberá exped irse en un plazo no m ayor de quince (15) días contados desde l a fecha en que las actuaciones queden en estado de resolver, concediendo o denegando el beneficio. El incumplimiento del plazo establecido, como así también la inactividad del Instituto para imp ulsar el procedimient o, dejará abierta la vía para que el interesado recurra en queja ante el Poder Ejecutivo quien, previa vista al Instituto para su descargo, aplicará las sanciones que correspondan. En caso de inactividad del interesado peticionante par a la presentación de los elementos de juicio faltantes, y una vez vencidos los plazos que el Instituto fije al efecto, podrá disponerse la devolución de las actuaciones, considerándoselas en tal caso como si nunca se hubieran iniciado. Artículo 29. (Texto según decreto ley 22/2000 ) Los beneficiarios de prestaciones jubilatorias, que continuaren en actividad o volvieren a ocupar cargos públicos en la administración Nacional, Pro vincial o Municipal o a prestar servicios bajo el régimen H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados de cualquier otro Instituto o Caja de Previsión adherido al sistema de reciprocidad jubilatoria, deberán comunicar esta circunstancia al Instituto dentro de los 30 días corridos de haber vuelto a la actividad o en el momen to de solicitar el beneficio, en el caso de que continuaren en ella. En este supuesto, no se percibirá haber alguno hasta la acreditación de la cesación definitiva. Estos servicios no darán derecho a reajuste de la prestación origin al, la que comenzará a p agarse a partir de la acreditación de la cesación en el servicio. La falta de cumplimiento por parte del beneficiario, en la forma y plazos establecidos en el primer párrafo de este artículo, dará lugar a la formulación de un cargo por los haberes percibid os indebidamente, con intereses, el que deberá ser cancelado con anterioridad al reingreso al goce del beneficio; al que se le adicionará la multa que se disponga por Resolución por el Administrador General, la cual se graduará entr e un veinticinco por cie nto (25%) y un cincuenta por ciento (50%) de los haberes percibidos. Esta disposición es también aplicable al jubilado que comunica su vuelta a la actividad fuera del plazo establecido. (Texto según decreto ley 158/2001 ). Se admite el reingreso o continuación en la actividad autónoma o en cargos docentes o de investigación en Universidades Nacionales, Provinciales o Privadas autorizadas pa ra funcionar por el Poder Ejecutivo Nacional, estableciéndose que dichos servicios no darán derecho a reajuste alguno. Lo dispuesto en el presente artículo es también aplicable a los beneficiarios de jubilaciones bancarias comprendidas en el régimen de la Ley Nº 4588. Except úase de lo dispuesto en este artículo a los beneficiarios de la Ley Nº 3439 . Quienes a la fecha de vigencia del presente decreto -ley se hallaren comprendidos en las previsiones del presente artículo tendrán un plazo de 30 días corridos p ara comunicar dicha situaci ón. Capítulo 3: Del Cómputo del Tiempo y Remuneraciones Artículo 30. Para el otorgamiento de los beneficios instituidos por esta ley o sus complementarias, el cómputo de servicios se hará invariablemente por períodos anuales y en fracción de meses y días . En el caso del personal cuya relación laboral se estipula por días o por horas, se computará un año de servicio por cada 288 días o 2304 horas, respectivamente. Tratándose de trabajos comunes, cada ocho horas se computarán por un día de labor, y si lo fu eran de servicios nocturnos o insalubres, el número de horas permitidas por la jornada legal respectiva se computará como un día de trabajo. Artículo 31. (Texto según decreto ley 22/2000) Se computarán únicamente los servicios con obligatoriedad de aportes, prestados a partir de los dieciocho (18) años de edad, a los afiliados comprendidos en el artículo 20 y de los que provengan de H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados reconocimientos de servicios de cajas o institut os integrantes del sistema de reciprocidad jubilatoria. Declárase al Instituto de Previsión Social, adherido al Sistema de Reciprocidad Jubilato ria instituido por el Decreto 9 316/46, ratificado por Ley Nº 12 921, sus complement arias y modificatorias. Artíc ulo 32. En ningún caso se computarán como tiempo de servicios los períodos no remunerados correspondientes a interrupciones o suspensiones, salvo las excepciones que taxativamente se establecen a continuación: a) los períodos de licencias, descansos legales o períodos de inactividad por enfermedad, accidentes, maternidad u otras causas que no interrumpan la relación laboral, siempre que por tales períodos se hubiere percibido remuneración o prestación compensatoria de ésta; b) los pe ríodos de servicio militar obl igatorio y los de convocatoria a los oficiales y suboficiales de la Reserva de las Fuerzas Armadas de la Nación; con arreglo a sus respectivos regímenes orgánicos, a condición de que al momento de la convocatoria el afiliado s e hubiese encontrado en activi dad y de que efectúe, además los aportes correlativos sobre la base del sueldo que haya percibido durante el tiempo de la incorporación. Artículo 33. Cuando el agente haya probado fehacientemente su prestación de servicios y no se le hubiesen efectuado lo s descuentos jubilatorios correspondientes por causa ajena a su responsabilidad, tendrá derecho al reconocimiento de tales servicios, formulándose los cargos respectivos. A tal efecto, se atenderá a las siguientes normas: a) el c argo por aportes personales no ingresados se calculará exclusivamente de conformidad con la presente ley y sobre la base del sueldo presupuestario actual correspondiente al cargo base con la proporción porcentual resultante del artículo 35 y sus correlativ os; b) el afiliado deberá ingresa r el cincuenta por ciento (50%) del cargo por aportes personales e intereses antes de entrar al goce del beneficio. El cincuenta por ciento (50%) restante podrá ser deducido de sus haberes jubilatorios, mediante descuentos men suales no mayores del diez por ciento (10%) del haber que perciba; c) cuando se tratare de pensión, el pago del cargo e intereses podrá efectuarse íntegramente por medio de retenciones mensuales de hasta un diez por ciento (10%) del haber liquidado al benefic iario; d) las contribuciones patr onales no ingresadas se calcularán en la misma forma y con los mismos intereses y su ingreso deberá producirse íntegramente a requerimiento del Instituto y/o a petición del afiliado. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 34. Los servicios prestados con a nterioridad a la vigencia de e sta ley serán reconocidos y computados de conformidad con las disposiciones de la presente, salvo lo dispuesto en el artículo 92. En ningún caso se reconocerán ni computarán servicios prestados \" ad-honorem\", cualquiera hubiere sido la característica o modo de designación para la prestación de los mismos. Artículo 35. (Texto según decreto ley 167/2001 ). El haber inicial de la Jubilación Ordinaria o por Invalidez será equivalente a l ochenta y dos por ciento (82%) del promedio de las remuneraciones con aportes, efectivamente percibidas por el agente en cualquiera de los entes comprendidos en el artículo 20, correspondientes a los últimos ciento veinte (120) meses anteriores al cese p rovincial. Dicha base se incrementará en doce (12) meses por cada año calendario, a partir del 1º de enero de 2002, hasta doscientos cuarenta (240) meses o la totalidad de los servicios computados correspondientes a esta Ca ja, si no alcanzaran esa antigüed ad pero fueran suficientes para obtener el beneficio dentro de este régimen. En este caso se deducirá del haber determinado un cinco por ciento (5%) por cada año faltante. No se tendrán en cuenta, para el cálculo del haber, remuneraciones percibidas en ser vicios simultáneos, en cuyo caso y por el período en que hubieren existido, se considerará únicamente – para cada mes – la mejor remuneración con aportes, efectivamente percibida en cualquiera de los entes comprendidos en e l artículo 20. El haber resultant e no podrá ser superior a pesos tres mil cien ($3.100,00), exceptuándose de este límite a quienes acrediten – como mínimo – veinticinco (25) años de aportes realizados al Instituto de Previsión Social. Se considerarán aport es a las deducciones realizadas e n este concepto y efectivamente ingresadas en el Instituto de Previsión Social. Artículo 35 bis. (Incorporado por decreto ley 167/2001 ). Las certificaciones de servicios deberán estar suscritas por la máxima autoridad administrativa del organismo otorgante. En el área municipal, mediante el dictado del acto administrativo correspondiente, con participación del Secretario de Hacienda o autoridad equivalente y certificado por Conta dor Público matriculado. Cuando el empleador, al extender la pertinente certificación, no pueda determinar el haber percibido en algún período, se considerará como si hubiera percibido la menor de las remuneraciones cert ificadas. Artículo 36. Cuando se co mputen servicios en otros regímenes comprendidos dentro del sistema de reciprocidad, el Instituto de Previsión Social de la Provincia aplicará las disposiciones del artículo 168 de la Ley Nacional Nº 24 .241. En consecuen cia, en tales casos será organismo o torgante de la prestación cualquiera de los comprendidos en dicho sistema de reciprocidad en cuyo régimen se acredite haber prestado mayor cantidad de años de servicios con aportes. Si existiese igual cantidad de años de servicios con aportes, el afiliado podrá optar por uno u otro organismo otorgante. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Cuando el Instituto de Previsión Social de la Provincia sea el otorgante del beneficio deberá requerir la transferencia de aportes, contribuciones y cargos correspondientes a los servicios de otras jurisdicci ones que se tomen en cuenta. Hasta tanto el Poder Ejecutivo Nacional reglamente las transferencias previstas en el Artícul o 168º de la Ley Nacional Nº 24 .241, el Instituto deberá tramitar y otorgar los beneficios sin rec ibir la transferencia previa. Una ve z dictada dicha reglamentación, las demoras en las transferencias no imputables al interesado no impedirán el otorgamiento y liquidación de los beneficios en esta Jurisdicción. En todos los casos el Instituto deberá recl amar la transferencia que correspond a. Los servicios comprendidos dentro del sistema de reciprocidad serán computados de acuerdo a las normas del régimen al que pertenecen dichos servicios. Artículo 37. Los agentes que por razón de las actividades cumplid as revistaren en algunas de las cate gorías profesionales u ocupacionales taxativamente enumeradas a continuación, tendrán derecho al cómputo privilegiado de edad y de servicios: a) personal de los cuerpos de policía, bomberos y establecimientos penitenciarios , con funciones directas de vigilanc ia, seguridad y defensa; b) médicos y auxiliares afectados a atención de enfermedades mentales, infecto -contagiosas, de menores con discapacidad psíquica, inadaptados y delincuentes o servicios de radiología y fisioterapia; c) personal que desempeñe tareas consi deradas insalubres por la ley; d) aeronavegantes y personal de control de la aeronavegación, e) el maestro de grado, jardín o pre -escolar, o profesor durante el tiempo que se haya desempeñado al frente directo de los alumnos; f) los docentes de las escuelas diferen ciales de cualquier modalidad, ciegos, sordos, o cualquier otra. Artículo 38. (Texto según decreto ley 207/2001 ). Las personas comprendida s en los incisos a), b), c), y personal de control de la aeronavegación del inciso d), tendrán derecho a por cada seis (6) años cumplidos en tareas mencionadas en el mismo se les compute un (1) año más en el cálculo de edad y servicios, siempre que hayan s ido ingresados en tiempo oportuno los a portes diferenciales correspondientes, salvo que la omisión no se debiera a causa imputable al interesado. El personal aeronavegante del inc. d) que se desempeñe en la función de piloto o copiloto tendrá derecho a por cada cuatrocientas (400) horas de vuel o se les compute un (1) año más de servicios. Las horas de vuelo efectivas solo serán tenidas en cuenta cuando las mismas sean certificadas en base a constancias fehacientes otorgadas por la Autoridad Aeronáutica que corresponda. En ningún el cómputo de se rvicios podrá ser integrado por bonificaciones de tiempo que excedan el cincuenta por ciento (50%) del total computado, ni las fracciones de tiempo que excede n de seis (6) meses se computarán como años enteros. En lo s casos comprendidos en el inciso e) de l artículo anterior, el H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados cómputo será de un (1) año más en el cálculo de edad y servicios por cada cuatro (4) años cumplidos, y en caso del inciso f), un (1) año más en el cálculo de edad y servicios por cada tres (3) años cumplidos, ambos en tareas mencion adas en los mismos, siendo aplicables las mismas condiciones respecto al ingreso oportuno de los aportes diferenciales correspondientes. Artículo 39. (Texto según decreto ley 22/2000) Será requisito indispensable para obtener alguna de las prestaciones previstas en esta Ley, el ingreso efectivo al tiempo de prestar el servicio de los aportes jubilatorios correspondientes a la antigüedad computable durante los siguientes períodos m ínimos, según el caso: a) veinte (20) años continuos o discontinuos con aportes, tratándose de servicios prestados en cualquiera de los entes comprendidos en el artículo 20 de la presente Ley; b) el término mínimo que fi jaren las normas pertinentes en vigencia e n la jurisdicción correspondiente, cuando se computaren servicios comprendido s en el sistema de reciprocidad. Artículo 40. Aclarase que las exigencias mínimas del artículo anterior no podrán suplirse con la formac ión del cargo por aportes no ingresados, s alvo que se acreditare que la omisión del aporte en tiempo oportuno no fue imputable al interesado. TÍTULO III : DE LOS BENEFICIOS EN PARTICULAR Capítulo 1 : De la Jubilación Ordinaria Artículo 41. (Texto según decreto ley 22/2000 ) Corresponderá jubilación ordinaria a los afiliados que reúnan los siguientes requisitos: a) acreditar treinta (30) años de servicios continuos o discontinuos, computables en uno o más institutos comprendido s en el sistema de reciprocidad; b) (Texto según decreto ley 207/2001) . Haber cumplido sesenta y cinco (65) años de edad el varón, y sesenta (60) años de edad la mujer, con excepció n del personal aeronavegante con función específica a bordo de aeronaves, quien deberá haber cumplido cincuenta (50) años de edad sin distinción de sexo. Artículo 42. (Texto según decreto ley 22/2000 ) Las edades establecidas en el artículo anterior se aplicarán a partir de la vigencia de la presente ley. Al solo efecto de completar los topes establecidos en los artículos anteriore s, se podrá compensar el exceso de edad con la falt a de servicios, y viceversa, en la proporción de dos (2) años excedentes por cada uno (1) faltante. Artículo 43. El agente que hubiese cumplido efectivamente los treinta (30) años de servicios y que no a lcanzare las edades mínimas previstas en los artícu los precedentes, podrá gestionar en cualquier momento después de su cese ante el H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Instituto el otorgamiento de la jubilación ordinaria. En tal caso el Instituto le reconocerá el derecho, si corresponde, per o el mismo se mantendrá en expectativa y el pago de l haber recién comenzará al momento de cumplir la edad exigida por esta ley. La opción acordada por el presente artículo se podrá hacer valer únicamente en caso de haber cesado el agente en la actividad po r renuncia, cesantía o cualquier otra causal que no enerve sus derechos jubilatorios. Capítulo 2 : Del Retiro Voluntario de la Mujer Artículo 44. Derogado por decreto ley 22/20 00. Capítulo 3 : De la Jubilación por Invalidez Artículo 45. Corresponderá jubilación por invalidez al afiliado en actividad bajo el régimen de la presente ley que se incapacite física o intelectualmente en forma total por cualquier causa. Se presume que la incapacidad es total cuando la invalidez produzca en su capacidad laborativa una disminución del sesenta y seis (66) por ciento o más. Se excluye las invalideces sociales o de ganancias. El mismo derecho tendrá quien se incapacitare, en las condiciones previstas en el párrafo anterior, dentro d el término de un (1) año siguiente al cese, siempre que reuniere por lo menos diez (10) años de servicios con aportes en cualquier instituto comprendido en el sistema de reciprocidad y el cese se hubies e producido bajo el régimen de la presente ley. Artíc ulo 46. No da derecho a la prestación la invalidez total temporaria que sólo produzca una incapacidad verificada o probable que no exceda el tiempo en que el afiliado fuere acreedor a la percepción de r emuneración u otra prestación sustitutiva. Artículo 47. La determinación de incapacidad estará a cargo de una Junta Médica especial integrada por el médico oficial del Instituto, quien ejercerá la Presidencia y será responsable del procedimiento dentro de la Junta; por un representante del Centro Provincial de Reconocimientos Médicos con especialidad en la materia que debe tratarse; y por un facultativo designado por el agente, si lo propone. La Junta deberá constituirse dentro de los diez (10) días contad os desde la presentación del interesado y expedirse de ntro del término de treinta (30) días a partir del momento de su constitución. Su dictamen versará sobre los puntos que conforme a las normas de esta Ley deban ser objeto de pronunciamiento técnico. El Instituto podrá, mediante resolución fundada, requerir nuevo dictamen pericial sobre cualquier caso que hubiere merecido dictamen de la Junta Médica constituida originariamente. En tal supuesto, podrá requerir la incorporación de nuevos facultativos a la J unta primitiva, así como la evaluación especial de las circunstancias o puntos sobre los que considere necesaria una nueva opinión técnica, la que deberá producirse dentro de un plazo no mayor de veinte (20) días. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 48. El Instituto, a través de su servicio médico y de asistentes sociales, tendrá la o bligación de controlar periódicamente y como mínimo una vez por año, la persistencia de la causal que hubiera determinado el acuerdo del beneficio. A tal efecto, el afiliado deberá someterse a los exám enes respectivos en el tiempo y forma que determine la reglamentación. Artículo 49. Todo acción u omisión imputable al afiliado para obtener el beneficio o para interferir el control que la presente ley establece, podrá determinar, según las circunstancia s y gravedad del caso, la pérdida del derecho a la jub ilación por invalidez. Cuando se comprobare dolo en la conducta del agente, la pérdida del derecho que deberá disponerse por el Instituto no impedirá el ejercicio de las acciones civiles y/o penales cor respondientes. Artículo 50. Los haberes correspondien tes a la jubilación por invalidez comenzarán a abonarse desde el momento de la presentación del afiliado al Instituto, siempre que no estuviese en uso de licencia extraordinaria con goce de haberes o co ntinuare en actividad en el cargo ejercido. En este úl timo supuesto, el haber jubilatorio se liquidará desde la fecha en que el agente deje de percibir remuneración en el empleo. Artículo 51. Si como consecuencia del control establecido por el artículo 48 se comprobare que el afiliado se encuentra en condici ones de reintegrarse a la actividad, por haber desaparecido total o parcialmente la causal que dio origen al beneficio, el interesado podrá solicitar su reintegro al servicio en función o tarea acorde c on su aptitud actual. En tal caso, deberá suspenderse el pago del haber jubilatorio a partir de los treinta (30) días contados desde la fecha de notificación del respectivo dictamen médico al interesado. Artículo 52. Cuando el afiliado hubiere percibido d urante diez (10) años el haber jubilatorio y contare, además, con la edad requerida en esta Ley para la obtención de la jubilación ordinaria, se considerará irrevocablemente adquirido el derecho a la prestación jubilatoria por invalidez, quedando relevado el agente de la obligación de someterse al examen médi co periódico establecido por esta ley. Esta disposición no se aplicará en caso de comprobarse dolo por parte del agente para la obtención del beneficio. Artículo 53. En el caso del artículo anterior, e l beneficiario no podrá en lo sucesivo reclamar reajus te del haber jubilatorio ni convertir la prestación en jubilación ordinaria, aunque volviere al servicio activo. Artículo 54. En todos los casos, el beneficiario de jubilación por invalidez que volvier e al servicio activo en un cargo o tareas rentados, en relación de dependencia y cualesquiera fueran las condiciones de labor, dejará de cobrar los haberes jubilatorios respectivos mientras continúe la actividad. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Sin perjuicio de ello, el de recho principal a la prestación jubilatoria se juzgará por las siguientes disposiciones: a) si la situación se hallare encuadrada en el supuesto del artículo 52, el derecho permanecerá inalterable y el Instituto deberá disponer la reanudación del pago de habe res a partir de la fecha del cese de los nuevos servic ios; b) en los demás supuestos, la vuelta del beneficiario a la actividad importará la extinción automática del derecho jubilatorio por invalidez. Artículo 55. En el supuesto del inciso b) del artículo an terior, los nuevos servicios acreditados por el agente , y el tiempo durante el cual hubiese percibido haberes jubilatorios por invalidez, le serán computados para obtener la jubilación ordinaria o alguna otra prestación de las instituidas por esta ley. Par a cubrir la antigüedad correspondiente al tiempo de go ce de la prestación indicada, se formularán los cargos por aportes personales y contribuciones patronales respectivos. Capítulo 4 : De la Pensión Artículo 56. En caso de muerte del jubilado, del benefi ciario de jubilación por invalidez, del afiliado en ac tividad, del afiliado encuadrado en la situación prevista en el artículo 43 o del afiliado que cualquiera fuere su tiempo de servicio, hubiere cesado en la actividad hasta un (1) año antes de la fecha d el fallecimiento por circunstancias que no enerven sus derechos jubilatorios, tendrán derecho a pensión: a) (Texto según ley 5561) la viuda y el viudo, la conviviente y el convivient e que hubieren vivido públicamente con el afiliado fallec ido en aparente matrimonio durante el mínimo de cinco (5) años anteriores a su muerte, si no existiere impedimento legal. En los casos previstos por el inciso c) del presente artículo la prestación s e otorgará en partes iguales entre el beneficiario de la pensión y el padre o madre del causante que se encuentre en las condiciones establecidas por dicho inciso; b) los hijos solteros, las hijas solteras, y las hi jas viudas siempre que no gozara n de jubilac ión, pensión, retiro o prestación no contributiva, salvo que optaren por la pensión que acuerda la presente, todos ellos hasta los dieciocho (18) años de edad; también los hijos minusválidos y los nietos huérfanos minusválidos gozarán del beneficio de por vida; c) los beneficiarios mencionados en el inciso a) y en las condiciones previstas en el mismo, en concurrencia con los padres del causante incapacitado para el trabajo y a cargo exclusivo de éste al momento de su deceso, siempre que no tuvieren hijos obli gados a prestarle alimentos y carecieran de otra prestaci ón previsional o graciable; d) los padres en las condiciones del inciso precedente; H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados e) los hermanos y las hermanas solteras y los nietos huérfanos de padre y madre, que hubiesen estado exclusivamente a car go del causante al tiempo de su deceso, hasta los diecioc ho (18) años de edad, siempre que no gozaren de otros beneficios previsional o graciable. El plazo de convivencia previsto en el inciso a) del presente artículo se reducirá a dos (2) años cuando exis ta descendencia reconocida por ambos convivientes. El o l a conviviente excluirá al cónyuge supérstite cuando éste hubiere sido declarado culpable de la separación personal o del divorcio. En caso contrario y cuando él o la causante hubiere estado contribuy endo al pago de alimentos o éstos hubieran sido demandado s judicialmente, o el o la causante hubiera dado causa a la separación personal o al divorcio, la prestación se otorgará al cónyuge y al conviviente por partes iguales. Artículo 57. La comprobación de las condiciones exigidas por el artículo anterior se ajustará a las siguientes disposiciones: a) para acreditar el vínculo de hecho y las causales de atribución de culpabilidad en la separación de hecho, así como cualquier otra circunstancia no tratada en modo especial por el presente artículo, se exigirá inform ación sumaria judicial o sentencia judicial en los casos pertinentes; b) para justificar el divorcio, sus causales y/o la atribución de culpabilidad de los cónyuges, se requerirá sentencia definitiva y firme pronunciada por la Justicia competente y/o las cons tancias del expediente judicial respectivo; c) para acreditar la representación legítima de los menores cuando no se hubiere resuelto el punto por otra autoridad competente, o cuando se hubiese excluido a un menor en el otorgamiento de una pensión a la que tu viere derecho, resultará indispensable la intervención del Ministerio Pupilar, a quien estarán reservadas las acciones o diligencias para allegar las probanzas exigidas por esta ley; d) para establecer los extremos de incapacidad para el trabajo, carencia de bienes de renta suficientes y condiciones socio -económicas del interesado, corresponderá al Instituto, a través de su Servicio Médico Oficial y del Servicio de Asistentes Sociales, según corresponda, efectuar los exámenes, encuestas o investigaciones neces arias para acreditar los extremos indicados; a cuyo efecto los respectivos servicios podrán practicar exámenes periciales y consultar las registraciones de la Dirección General de Rentas de la Provin cia, municipalidades, registros inmobiliarios y demás fue ntes de informaciones fidedignas. Artículo 58. Los límites de edad fijados por el artículo 56, incisos b) y e), no regirán si los derecho -habientes respectivos se encontraren incapacitados para el trabajo y a cargo exclusivo del causante a la fecha de s u fallecimiento, o incapacitado para el H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados trabajo a la fecha en que cumpliera los dieciocho (18) años de edad. En ambos supuestos se requerirá, además, que los interesados carecieren de medios de renta suficientes y de otra prestación previsional o graciable . Artículo 59. En los casos de hijos, nietos y hermanos del causante, cualquiera fuere el sexo, que cursaren estudios secundarios o superiores en calidad de alumnos regulares, el derecho a la pensió n corresponderá hasta los veintiún (21) años de edad, si no concluyeren antes los mencionados estudios. Para tener derecho a esta excepción, los interesados deberán presentar cada seis (6) meses certificado de estudios y de pobreza, hasta cumplir el límite de edad que este artículo determina. Artículo 60. No ob stante lo dispuesto en los artículos precedente, no tendrán derecho a pensión: a) el cónyuge que por su culpa o culpa de ambos estuviere divorciado al momento de la muerte del causante. En el caso espec ial de divorcio por mutuo consentimiento, cuando el cónyu ge fallecido hubiese tenido a su cargo la obligación de pasar alimentos, mientras no concurra alguna de las causas previstas en el artículo 62 para la pérdida de la prestación, el cónyuge supérstite tendrá derecho a percibir como pensión un haber igual al monto o porcentaje fijado judicialmente para la cuota alimentaria, siempre que no excedieren los topes fijados por esta ley; b) los causa -habientes en general, en caso de indignidad para suceder o de de sheredación, de acuerdo con las disposiciones del Código Civil y del Código Penal en lo que éste fuera aplicable. Artículo 61. La mitad del haber de la pensión corresponderá a la viuda, al viudo o a quien hubiere vivido públicamente con el afiliado fallec ido, en aparente matrimonio, si concurrieren hijos, nieto s o padres del causante en las condiciones del artículo 56; la otra mitad se distribuirá entre éstos por partes iguales, con excepción de los nietos quienes percibirán en conjunto la parte de la pens ión a que hubiere tenido derecho el progenitor prefalleci do. A falta de hijos, nietos o padres, la totalidad del haber de la pensión corresponderá a la viuda, al viudo o al conviviente. En caso de extinción del derecho a pensión de alguno de los copartícip es, su parte acrece proporcionalmente la de los restantes beneficiarios, respetándose la distribución establecida en el presente artículo. Artículo 62. El derecho a la pensión se extinguirá: a) por la muerte del beneficiario o su fallecimiento presunto judic ialmente declarado; b) para los beneficiarios cuyo derecho a pensión estuviere limitado por la edad, desde la fecha que cumplieren las edades establecidas, salvo que a esa fecha se encontraren incapacitados para el trabajo y carecieren H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados de medios de renta sufi cientes u otra prestación de cualquier naturaleza; c) para l os beneficiarios de pensión cuyo derecho se hubiese fundado en incapacidad para el trabajo, desde que tal incapacidad desapareciere definitivamente, salvo que a esta fecha tuvieren la edad exigida po r esta ley para la obtención de la jubilación ordinaria, y además hubiesen percibido el haber durante diez (10) años como mínimo. En todos los casos, para resolver situaciones comprendidas en el presente Capítulo, deberán tenerse en cuenta las disposicione s relativas a la jubilación por invalidez. Capítulo 5 : Disposiciones Complementarias Artículo 63. El jubilado que hubiere vuelto o volviere a la actividad y cesare con posterioridad a la entrada en vigencia de la presente Ley, quedará sujeto a las siguien tes normas: a) si gozara de alguna de las prestaciones previ stas en esta Ley, podrá reajustar el haber de la misma mediante el cómputo de los nuevos servicios y remuneraciones, siempre que hubiera desempeñado tales servicios durante un lapso mínimo de cuarent a y ocho (48) meses. En tal caso no cambiará el cargo -base determinado en su momento, pero se adicionará al mismo el porcentual que corresponda en función de las nuevas remuneraciones y en proporción al nuevo lapso de servicios, en relación a los treinta ( 30) años exigidos por la ley; b) si gozara de jubilación por edad avanzada o retiro voluntario de la mujer, podrá transformar el beneficio en jubilación ordinaria, siempre que acreditare los requisitos exigidos para la obtención de ese beneficio. En tal caso, el reajuste del haber se realizará de conformidad a lo d ispuesto en el inciso anterior, si correspondiere. TÍTULO IV : DEL HABER DE LAS PRESTACIONES Capítulo 1 : Del Cargo -Base y su Determinación Artículo 64. Derogado por decreto ley 22/2000. Capítulo 2 : Del Haber de las Prestaciones Artículo 65. El haber de la jubilación ordinaria será equivalente al ochenta y dos por ciento (82%) móvil de las remuneraciones correspondient es al cargo -base, con la proporción porcentual que correspon da, de acuerdo a lo dispuesto en los artículos 35 y 64 de la presente ley. El haber de la jubilación por invalidez será equivalente al de la jubilación ordinaria, con una reducción del uno por cie nto (1%) por cada año de servicios faltante en relación a lo s treinta (30) años que exige la ley, y del cero cincuenta por H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados ciento (0,50%) por cada año de edad faltante para alcanzar el mínimo exigido para la jubilación ordinaria. Artículo 66. (Texto según decreto ley 22/2000 ) Las deducciones de los beneficios otorgados por normas anteriores a la presente, no sufrirán modificación alguna, salvo en el caso previsto en el primer p árrafo del artículo 90 de la Ley 4917. A fin de uniformar el pr ocedimiento de liquidación de las prestaciones, como de facilitar el cálculo y tramitación de las futuras movilidades que pudieran corresponder, los haberes jubilatorios correspondientes a bene ficios comprendidos dentro del presente régimen, serán reexpres ados bajo la denominación de haber inicial jubilatorio, desapareciendo la expresión Cargo Base, Acumulado y/o Simultáneo. Artículo 67. (Texto según decreto ley 22/2000 ) El haber de los beneficios será móvil. En el caso de incrementos en las remuneraciones sujetas a aportes jubilatorios del personal en actividad, la movilidad se efectuará dentro de los sesenta (60) d ías de producidos; en el caso de deducciones, las mismas se aplica rán a partir de la fecha de producidas. A partir de la presente y para la aplicación de lo precedentemente establecido, las prestaciones otorgadas con anterioridad se considerarán como haber inicial jubilatorio a los efectos de las posteriores movilidades. No existirá derecho a reajuste como consecuencia de recategorizaciones, reescalafonamiento y/o cualquier otra modificación en las estructuras orgánicas o escalas salariales. En tal caso, se mantendrá como haber inicial jubilatorio, el vigente con anterior idad a la recategorización , reescalafonamiento o modificación alguna. El mismo criterio se aplicará en caso de desaparición del Cargo Base o Cargos Acumulados. Artículo 68. (Texto según decreto ley Nº 22/2000 ). El haber de las pensiones será equivalente al setenta y cinco por ciento (75%) del haber inicial jubilatorio que percibiere o le hubiera correspondido al cau sante. Artículo 69. El haber máximo de los beneficios otorgados o a otorgarse por el Instituto de Previsión Social será de pesos tres mil ($ 3.000) mensuales, sin perjuicio de la suma que corresponda por salario familiar y bonificación por escolaridad. Este máximo se aplicará en relación a la totalidad del haber que per ciba el beneficiario, cualquiera fuera el número de cargos o funciones tenidos en cuenta para el otorgamiento del beneficio. En consecuencia, los límites establecidos en este artículo no pod rán ser superados por ningún beneficiario del sistema. Para los be neficios vigentes, las disposiciones de los párrafos precedentes se aplicarán a partir del 1º de febrero de 1995. El monto del haber máximo establecido en el primer párrafo del presente artículo, tendrá vigencia por un lapso de doce (12) meses contados a p artir de la sanción de esta ley. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 70. Facúltase al Poder Ejecutivo a fijar haberes mínimos para cada uno de los tipos de beneficio previstos en esta ley y en la Ley Nº 3 439, como as í también a reajustarlos de acuerdo a las pautas fijadas en el últ imo párrafo del artículo precedente. Artículo 71. En el caso de incapacidad total y permanente del personal con estado policial, producida como consecuencia del ejercicio de sus funciones e specíficas, el haber jubilatorio será equivalente al ciento por ci ento (100%) de la remuneración neta de aportes previsionales correspondiente al cargo -base, y la proporción porcentual que corresponda de acuerdo a lo dispuesto en los artículos 35 y 64 de e sta ley. TÍTULO V : DISPOSICIONES PROCESALES Artículo 72. Se cons iderará iniciación de trámite, a los efectos de la liquidación de haberes y del cómputo de los plazos para la prescripción, la fecha establecida por la Mesa de Entradas del Instituto al asen tar en su Registro, con la respectiva numeración, el expediente pr omovido por cualquier afiliado con el objeto de obtener alguna prestación o reconocimiento de servicios, siempre que la presentación contenga la totalidad de los documentos necesarios para e l otorgamiento del beneficio o reconocimiento de servicios. El Ins tituto determinará los documentos exigibles en cada caso y asegurará la debida publicidad a los fines de la información de los interesados, siendo de aplicación los requisitos exigidos hasta el momento de la presentación. Artículo 73. Para la iniciación d el trámite no se exigirá la cesación del afiliado, pero la liquidación del haber de la prestación que le correspondiere quedará pendiente hasta la presentación del certificado de cesación de servicios. El reconocimiento de servicios podrá promoverse en cua lquier oportunidad, no siendo exigible al efecto constancia de haber iniciado trámite jubilatorio. Artículo 74. El impulso procesal se producirá de oficio, sin que el afiliado deba instar e l procedimiento ni realizar actividad alguna, salvo los casos en q ue la continuación del trámite dependa de la intervención del interesado o la producción de pruebas y/o diligencias a su cargo. Artículo 75. A los fines del artículo anterior, el Instituto tendrá facultades para recabar directamente de los Poderes del Est ado, demás reparticiones centralizadas o descentralizadas y de las instituciones municipales, así como de los demás Institutos adheridos al sistema de reciprocidad, los antecedentes, informe u otros elementos de juicio que resultaren necesarios. Artículo 76. Contra las resoluciones del Instituto podrá interponerse los recursos de reconsideración y de apelación. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados El recurso de reconsideración deberá interponerse por escrito y debidamente funda do dentro del plazo de treinta (30) días contados desde la fecha d e notificación, si el recurrente tuviere domicilio dentro de la Provincia, y de sesenta (60) días si se domiciliara fuera de ella. Con el escrito de interposición de recurso, deberá acompaña rse toda la prueba que el interesado desee hacer valer. Si el recu rrente no tuviere en su poder los elementos probatorios, deberá indicar con precisión el lugar donde pueden ser requeridos. El Instituto deberá resolver el recurso dentro de los quince (15) días de su interposición en caso de que no se hubiesen ofrecido pr uebas, y de treinta (30) días si las pruebas se hubiesen ofrecido o si se hubiesen ordenado diligencias para mejor proveer. Este último plazo podrá ampliarse por quince (15) días más si no f uere posible producir o diligenciar toda la prueba dentro del térm ino originario. Transcurridos los plazos indicados sin haberse dictado resolución, se considerará denegada la petición, quedando abierta para el interesado la vía del recurso de apelación. Artículo 77. El recurso de apelación se interpondrá por ante el Po der Ejecutivo en la misma forma y plazos establecidos en el artículo anterior. Para el caso de proponerse nuevas pruebas, las mismas no podrán versar sobre hechos o circunstancias ya acredit ados al momento de la reconsideración. Regirán en este supuesto, l os plazos y demás normas del artículo anterior en materia de ofrecimiento y producción de pruebas. Interpuesto el recurso, el Instituto decidirá sumariamente si se han cumplido los extremos procesales que lo hagan procedente. Dentro de los cinco (5) días s iguientes deberá dictar resolución haciendo o no lugar a la apelación. Si la resolución fuere favorable a la admisión del recurso, dispondrá la elevación de las actuaciones al Poder Ejecutiv o por vía del ministerio competente. En caso de denegarse la apela ción, el interesado podrá recurrir directamente en queja ante el superior dentro de los quince (15) días siguientes, contados desde la notificación de la denegatoria. Concedido el recurso o entablada la queja, el Poder Ejecutivo deberá expedirse dentro del plazo de sesenta (60) días a partir de la fecha en que el Instituto eleva las actuaciones. El pronunciamiento definitivo en sede administrativa deberá producirse previo dictamen del Fiscal de Estado. Vencido el plazo de sesenta (60) días acordado para el pronunciamiento del Poder Ejecutivo sin que éste hubiese dictado el decreto correspondiente, se tendrá por desestimada la apelación, quedando expedita al interesado la vía del remedio jurisd iccional pertinente. Artículo 78. Contra las decisiones definitiv as dictadas por el Poder Ejecutivo, denegatorias del derecho invocado por el afiliado, o en caso de vencimiento del plazo determinado para pronunciarse sin que se produjese decisión, el inte resado podrá deducir la acción contenciosa -administrativa; a cuyo efecto dispondrá de un plazo de veinte (20) días contados desde la fecha de la notificación del decreto o del vencimiento del término fijado en el artículo anterior. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Artículo 79. Los términ os para interponer recursos en sede administrativa o judicial debe rán contarse en días hábiles. Artículo 80. Se considerarán válidas las notificaciones sólo cuando se efectúen personalmente al interesado o a su representante legalmente facultado, dentro d el expediente, o por cédula que se diligenciará en la forma establ ecida en el Código de Procedimientos Administrativo de la Provincia, o bien por telegrama colacionado o carta certificada con aviso de retorno. Artículo 81. La representación de los afiliad os o sus derecho -habientes sólo podrá hacerse por las siguientes p ersonas: a) el cónyuge, ascendientes, descendientes y parientes colaterales hasta el cuarto (4º) grado, y por afinidad hasta el segundo (2º) grado inclusive; b) los abogados y procuradores de la m atrícula debidamente inscriptos ante el Instituto, para lo cual de berán cumplir los requisitos fijado por el Instituto; c) los representantes diplomáticos y consulares acreditados ante el Gobierno de la Nación, de conformidad con las convenciones que se celeb ren con los respectivos países; d) los tutores, curadores y represent antes necesarios; El Instituto reglamentará los requisitos necesarios para acreditar la representación y el parentesco. Artículo 82. Las asociaciones de jubilados y pensionados con personer ía jurídica podrán acreditar ante el Instituto gestores administra tivos con la finalidad de atender los reclamos efectuados por sus afiliados. El Instituto determinará las calidades, número y demás requisitos a que deberán ajustarse los gestores administra tivos. No podrán actuar como gestores administrativos quienes haya n sido funcionarios del Instituto hasta después de diez (10) años contados desde la fecha de cesación en estas funciones. Tampoco podrán hacerlo quienes hayan ejercido o ejerzan la gestoría previsional por cuenta propia, aun cuando no tuviesen facultades p ara representar. Artículo 83. El Poder Ejecutivo reglamentará especialmente las formalidades y demás condiciones que se exigirán a los apoderados y gestores para actuar ante el Instituto en representación de afiliados. Artículo 84. Los abogados y procura dores de la matricula únicamente podrán percibir, de los beneficiarios que representaren o patrocinaren, honorarios de acuerdo a la Ley de Aranceles vigente en materia administrativa. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados Los ge stores administrativos y demás representantes no podrán percibir d e los afiliados o sus derecho -habientes retribución alguna en dinero o en especie por su intervención en los trámites. TÍTULO VI : DISPOSICIONES COMPLEMENTARIAS Y TRANSITORIAS Capítulo 1 : Disposiciones Complementarias Artículo 85. En sus relaciones con e l Poder Ejecutivo, el Instituto se vinculará con el Ministerio Secretaría General de la Gobernación o el que, en su reemplazo, fijare posteriormente la Ley Orgánica de Ministerios. Artículo 86. Facultase al Poder Ejecutivo para emplazar a los empleados y funcionarios que hubiesen cumplidos los extremos de edad y antigüedad para iniciar el trámite jubilatorio, con excepción de los que ejercieren cargos y funciones de carácter inamovible. El emplazamiento establecido por la presente norma producirá los efect os de la iniciación del trámite, debiendo el Poder Ejecutivo ordenar la remisión al Instituto de las constancias de las cuales se haya valido para determinar el cumplimiento de los requisito s señalados. Artículo 87. Los agentes emplazados para gestionar l a jubilación, según lo dispuesto por el artículo anterior, estarán obligados a efectuar las diligencias necesarias para agilizar el trámite, aportando los datos y comprobantes complementario s que resultaren indispensable a los fines de la decisión final. En caso que el afiliado no concurriese a continuar el trámite una vez emplazado, el Poder Ejecutivo podrá disponer su baja transcurrido noventa (90) días corridos desde la fecha de notificaci ón del emplazamiento. Si el trámite se viese demorado por causas n o imputables al agente, se mantendrá la relación laboral por el tiempo necesario para completar el procedimiento y resolver en definitiva. Artículo 88. Toda gestión, pedido o actuación prom ovida por los afiliados del Instituto de Previsión Social a los fi nes de obtener cualquiera de los beneficios acordados por esta ley estará exenta de impuestos, tasas de actuación u otras que correspondiere por las leyes fiscales. En sede judicial, los afi liados gozarán del beneficio de pobreza. El Instituto, sea como ac tor o demandado, podrá actuar en sede judicial sin el sellado o tasa de actuación fijados para los casos comunes; y toda publicación que se deba efectuar por éste o por cualquier otro motivo en el Boletín Oficial, se efectuará sin cargo alguno. Artículo 89. Aclarase qu e el artículo 4º de la Ley Nº 3 439, que establece la prohibición de computar funciones policiales para la determinación del haber cuando no se reúnen las condiciones para obten er un retiro con cargo -base policial, con la sola excepción previs ta en el último párrafo de dicho artículo, rige desde la fecha de H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados su sanción para todos los beneficios otorgados o a otorgar por el Instituto de Previsión Social. Artículo 89 bis. (Incorporado por decreto ley 22/2000 ) Toda modificación en el cómputo de edad y tiempo de servicios, no podrá realizarse sin un estudio actuarial previo. Toda incorporación de nuevos be neficios o incremento de los ya existentes, deberá ser acompañado med iante la creación simultánea de las partidas presupuestarias con las que se soportarán los beneficios o incrementos. Capítulo 2 : Disposiciones Transitorias Artículo 90. Los haberes prev isionales correspondientes a beneficios acordados de acuerdo a dispos iciones anteriores a la presente ley, no podrán ser modificados, salvo el caso de que hayan sido liquidados en violación a las normas que se encontraban vigentes en su momento. Artículo 91. Derogado por ley 5053 . Artículo 92. (Texto según decreto ley 22/2000 ). En los casos de trámite s iniciados con anterioridad a la vigencia de la presente Ley con el objeto de obtener alguna de las prestaciones previstas en disposiciones legales anteriores a la misma, deberá aplicarse la ley vigente al momento de la cesación de servicios del afiliado, o del fallecimiento en caso de pensión. Tratándose de beneficios otorgados , cuya vigencia estuviera condicionada a la cesación en el servicio, se aplicará la ley vigente en el momento del otorgamiento, pero el beneficio sólo se hará efectivo a partir del cese. En el caso de que existan trámites sin resolución acordatoria de bene ficio ni cese de servicios, deberán ser recalculados los cómputos de años de servicios, edad y determinación de haberes, según lo establecido en el presente Decreto – Ley. La legisl ación aplicable en todos los casos para la obtención de los beneficios, será la vigente al momento del cese. Artículo 92 bis (Incorporado por decreto ley 22/2000 ) Establécese que los conceptos que hayan sido declarados sujetos a aportes en virtud de lo establecido en el art. 14 de la l ey 4917, a partir del 01 de marzo del 2000, no serán considerados para los beneficios otorgados o a otorgarse, a los fines de la movilidad establ ecida en el art. 65 y 67 de la presente ley, sino después de 84 meses de la en trada en vigencia de la misma, pudiendo en su caso quienes ya poseen el beneficio otorgado, aportar previamente el importe equivalente a 84 meses de los cargos que le hubiere correspondido por aportes y contribuciones, con más un interés acumulado de caja de ahorro común del Banco de la Nación Argentina. Artículo 93. Autorí zase al Poder Ejecutivo, a las reparticiones autárquicas o descentralizadas y a las instituciones del régime n municipal, cualquiera fuere su categoría, a formalizar convenios de pago al Instituto por los importes que resultaren deudores en concepto de aportes previsionales, adeudados hasta la fecha de vigencia de la presente ley, para lo cual podrán pactarse cua lesquiera de las formas de pago H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados que el Instituto, en cumplimiento de los fines de esta Ley, considere aceptables, incluida la entrega de bienes inmuebles. Artículo 94. Créase en el ámbito de la Legislatura de la Provincia una Comisión Bicameral de seguimi ento del sistema de Previsión Social, que tendrá por objeto conocer y evaluar la situación económico -financiera del Instituto de Previsión Social en orden a las disposiciones de los artículos 69 y 91 de la Ley Nº 4 913. Artículo 95. Déjase sin efecto toda disposición legal que se oponga a la presente. Artículo 96. Comuníquese al Po der Ejecutivo. Dada en la Sala de Sesiones de la Honorable Legislatura de la Provincia de Corrientes, a uno de abril del año mil novecientos noventa y cinco. H. Cámara de Diputados Provincia de Corrientes República Argentina Digesto de Leyes Provinciales – Honorable Cámara de Diputados";

    }

    private function deleteFile($uri){
        $clienteFile = new Client([
            'base_uri' => 'https://generativelanguage.googleapis.com/upload/v1beta/files',
            'headers' => [
                'Authorization' => 'Bearer ' . env('GOOGLE_API_KEY_DOCO'),
            ],
        ]);

        try {
            $response = $clienteFile->delete($uri);
            if ($response->getStatusCode() === 200) {
                return [
                    'message' => 'Archivo eliminado exitosamente (Guzzle)',
                ];
            } else {
                return [
                    'error' => 'Error al eliminar el archivo (Guzzle): ' . $response->getBody(),
                    'status' => $response->getStatusCode(),
                ];
            }

        } catch (\GuzzleHttp\Exception\GuzzleException $e) {
            return [
                'error' => 'Error de Guzzle al eliminar el archivo: ' . $e->getMessage(),
                'status' => 500,
            ];
        }
    }

    public function verificarArchivoFile($name){
     $client = new Client([
            'base_uri' => 'https://generativelanguage.googleapis.com/v1beta/files?key='. env('GOOGLE_API_KEY_DOCO'),
        ]); 
        try {            
            $response = $client->get('');
            if ($response->getStatusCode() === 200) {
                $data = json_decode($response->getBody(), true);
                foreach ($data['files'] as $file) {
                    if ($file['displayName'] === $name) {
                        return $file['uri'];
                    }else{
                        return null;
        }
                }
            }
        } catch (\Throwable $th) {
            return null;
        }  
    }

    public function cargarFile(Request $request){
        $file = $request->file('file');
        if (!$file) {
            return response()->json(['error' => 'No se ha subido ningun archivo'], 400);
        }
        $fileInfo = $this->uploadFile($file);
        if (isset($fileInfo['error'])) {
            return response()->json(['error' => $fileInfo['error']], $fileInfo['status']);
        }
        return response()->json(['message' => 'Archivo subido exitosamente', 'data' => $fileInfo], 200);
    }
}
